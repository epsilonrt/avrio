<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>AvrIO: Hub WirelessUSB iDwaRF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="avrio.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AvrIO
   &#160;<span id="projectnumber">0.34-dev</span>
   </div>
   <div id="projectbrief">Bibliothèque C modulaire pour ATMEL AVR</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li><a href="examples.html"><span>Exemples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00293.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Structures de données</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Définitions de type</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Énumérations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Valeurs énumérées</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groupes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Énumérations</a>  </div>
  <div class="headertitle">
<div class="title">Hub WirelessUSB iDwaRF<div class="ingroups"><a class="el" href="a00292.html">Firmware iDwaRF-Net</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description détaillée</h2>
<p>Implémente l'interface logicielle permettant de gérer un hub WirelessUSB. Cette interface se résume essentiellement à 2 fonctions permettant de recevoir les informations transmises par les capteurs et de leur transmettre en réponse des informations (de façon asynchrone donc...) :</p>
<ul>
<li><a class="el" href="a00293.html#ga0de54ea5738a40c2e85276e86551bfe9">cbPacketReceived()</a> appelée juste avant que le capteur passe en mode PowerDown</li>
<li><a class="el" href="a00294.html#ga9cfb66afd30cde7800ccca91727144bf">cbExitFromSleep()</a> appelée après le retour du capteur du mode PowerDown.</li>
<li><a class="el" href="a00294.html#ga49370f2d72ee106d33b127b3d851bd84">cbBackchannelProcess()</a> appelée lorsque des données provenant du hub ont été reçues dans le canal de retour.</li>
<li><a class="el" href="a00294.html#gaee52055e513e3998910af4ab605911f2">cbTxProcess()</a> chargée d'assembler les données à envoyer au hub</li>
</ul>
<p>Une fois l'initialisation effectuée à l'aide de <a class="el" href="a00292.html#gabafd325193df7d07f2c94b40ae7c9724">rfInit()</a>, l'utilisateur doit enregistrer sa fonction de gestion des paquets reçus à l'aide de <a class="el" href="a00293.html#ga5c28f5f58329f36ede84c1b3a94d9eed">rfRegisterCBSensorDataReceived()</a> puis appeler <a class="el" href="a00292.html#ga284181d3fe49a8f027874bb287387a03">rfProcessAll()</a> à chaque itération de la boucle infinie du programme principal. <br/>
</p>
<div class="dynheader">
Graphe de collaboration de Hub WirelessUSB iDwaRF:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00293.png" border="0" alt="" usemap="#a00293"/>
<map name="a00293" id="a00293">
<area shape="rect" id="node1" href="a00292.html" title="Firmware iDwaRF&#45;Net" alt="" coords="6,5,154,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Énumérations</h2></td></tr>
<tr class="memitem:ga3ee87cdcca4a5f480dcc3e873a5e46f3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga3ee87cdcca4a5f480dcc3e873a5e46f3">COMMAND_STATUS</a> { <br/>
&#160;&#160;<b>CMD_STATUS_SUCCESS</b>, 
<b>CMD_STATUS_UNKNOWN_CMD</b>, 
<b>CMD_STATUS_UNKNOWN_ID</b>, 
<b>CMD_STATUS_BUFFER_OVERFLOW</b>, 
<br/>
&#160;&#160;<b>CMD_STATUS_PRIOR_PAYLOAD_LOST</b>, 
<b>CMD_STATUS_PN_CODE_INDEX_INVALID</b>, 
<b>CMD_STATUS_CHANNEL_INVALID</b>, 
<b>CMD_STATUS_MSG_QUEUED</b>, 
<br/>
&#160;&#160;<b>CMD_STATUS_INVALID_CHANNEL</b>
<br/>
 }</td></tr>
<tr class="memdesc:ga3ee87cdcca4a5f480dcc3e873a5e46f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Code renvoyés par les commandes envoyées au hub. <br/></td></tr>
<tr class="separator:ga3ee87cdcca4a5f480dcc3e873a5e46f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ed0920c461609e27d97360ad25b2ac3"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga1ed0920c461609e27d97360ad25b2ac3">CBSENSORPACKETRECEIVED</a> )(<a class="el" href="a00292.html#ga3ac2f53a6db3f2414db8091758ad890f">PACKET_TYPES</a> PacketType, <a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> UserDataCount, volatile <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *buf)</td></tr>
<tr class="memdesc:ga1ed0920c461609e27d97360ad25b2ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type de fonction de gestion de réception de paquets.  <a href="#ga1ed0920c461609e27d97360ad25b2ac3">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga1ed0920c461609e27d97360ad25b2ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0de54ea5738a40c2e85276e86551bfe9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga0de54ea5738a40c2e85276e86551bfe9">cbPacketReceived</a> (<a class="el" href="a00292.html#ga3ac2f53a6db3f2414db8091758ad890f">PACKET_TYPES</a> PacketType, <a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> UserDataCount, volatile <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *buf)</td></tr>
<tr class="memdesc:ga0de54ea5738a40c2e85276e86551bfe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exemple de fonction utilisateur de gestion de réception de paquets.  <a href="#ga0de54ea5738a40c2e85276e86551bfe9">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga0de54ea5738a40c2e85276e86551bfe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c28f5f58329f36ede84c1b3a94d9eed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga5c28f5f58329f36ede84c1b3a94d9eed">rfRegisterCBSensorDataReceived</a> (<a class="el" href="a00293.html#ga1ed0920c461609e27d97360ad25b2ac3">CBSENSORPACKETRECEIVED</a> cbSensor)</td></tr>
<tr class="memdesc:ga5c28f5f58329f36ede84c1b3a94d9eed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enregistre la fonction de réception de paquets.  <a href="#ga5c28f5f58329f36ede84c1b3a94d9eed">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga5c28f5f58329f36ede84c1b3a94d9eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1afc05c39d5aa99a9b7dbe424b83037"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#gad1afc05c39d5aa99a9b7dbe424b83037">rfReset</a> (void)</td></tr>
<tr class="memdesc:gad1afc05c39d5aa99a9b7dbe424b83037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Effectue une réinitialisation logicielle du firmware et du processeur.  <a href="#gad1afc05c39d5aa99a9b7dbe424b83037">Plus de détails...</a><br/></td></tr>
<tr class="separator:gad1afc05c39d5aa99a9b7dbe424b83037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fd004b962b40628cbfb2d8459fd1c5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#ga7e421c1ba14c79eb5d8ccbd7ea44cffb">PROTOCOL_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga2fd004b962b40628cbfb2d8459fd1c5d">rfGetProtocolStatus</a> (void)</td></tr>
<tr class="memdesc:ga2fd004b962b40628cbfb2d8459fd1c5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renvoie la variable d'état interne du firmware du hub.  <a href="#ga2fd004b962b40628cbfb2d8459fd1c5d">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga2fd004b962b40628cbfb2d8459fd1c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ed69ac82f8c499c22691bc4bd5357e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga0ed69ac82f8c499c22691bc4bd5357e0">rfStartBind</a> (void)</td></tr>
<tr class="memdesc:ga0ed69ac82f8c499c22691bc4bd5357e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valide le mode bind.  <a href="#ga0ed69ac82f8c499c22691bc4bd5357e0">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga0ed69ac82f8c499c22691bc4bd5357e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga489bcc0a1f2c4a48f4c9aa254faa2ab3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga489bcc0a1f2c4a48f4c9aa254faa2ab3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga489bcc0a1f2c4a48f4c9aa254faa2ab3">rfStopBind</a> (void)</td></tr>
<tr class="memdesc:ga489bcc0a1f2c4a48f4c9aa254faa2ab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalide le mode bind. <br/></td></tr>
<tr class="separator:ga489bcc0a1f2c4a48f4c9aa254faa2ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafca611de2af26b00c78adf47e4460781"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#gafca611de2af26b00c78adf47e4460781">rfGetMaximumDeviceId</a> (void)</td></tr>
<tr class="memdesc:gafca611de2af26b00c78adf47e4460781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renvoie l'identifiant le plus élevé pouvant être géré par le hub.  <a href="#gafca611de2af26b00c78adf47e4460781">Plus de détails...</a><br/></td></tr>
<tr class="separator:gafca611de2af26b00c78adf47e4460781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga270559d73bc5379a0fe9a7d72b88af98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga270559d73bc5379a0fe9a7d72b88af98">rfGetSensorMID</a> (<a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId, <a class="el" href="a00292.html#gaadbb32d2daa5cdd157a86e3d92f23f2d">MID</a> *mid)</td></tr>
<tr class="memdesc:ga270559d73bc5379a0fe9a7d72b88af98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test de la validité et lecture du MID d'un capteur.  <a href="#ga270559d73bc5379a0fe9a7d72b88af98">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga270559d73bc5379a0fe9a7d72b88af98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94f65ad2454ca5084807877fe5cb0259"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga94f65ad2454ca5084807877fe5cb0259">rfDeleteSensor</a> (<a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId)</td></tr>
<tr class="memdesc:ga94f65ad2454ca5084807877fe5cb0259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suppression d'un capteur.  <a href="#ga94f65ad2454ca5084807877fe5cb0259">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga94f65ad2454ca5084807877fe5cb0259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee368d1d10062ee8ef9db75e1364a2fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#gaee368d1d10062ee8ef9db75e1364a2fe">rfSetBackchannelData</a> (<a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> userData, <a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> beaconTime, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *buf, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> length)</td></tr>
<tr class="memdesc:gaee368d1d10062ee8ef9db75e1364a2fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mémorise les données à trasmettre à un capteur par la canal de réponse.  <a href="#gaee368d1d10062ee8ef9db75e1364a2fe">Plus de détails...</a><br/></td></tr>
<tr class="separator:gaee368d1d10062ee8ef9db75e1364a2fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2bbb0ff4fe7815b1b32a83e4f983176"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#gae2bbb0ff4fe7815b1b32a83e4f983176">rfIsBackchannelFree</a> (<a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId)</td></tr>
<tr class="memdesc:gae2bbb0ff4fe7815b1b32a83e4f983176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Teste s'il est possible de mémoriser des données pour un capteur.  <a href="#gae2bbb0ff4fe7815b1b32a83e4f983176">Plus de détails...</a><br/></td></tr>
<tr class="separator:gae2bbb0ff4fe7815b1b32a83e4f983176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18df5b22a1bdf1437f9cd562e2614333"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00293.html#ga18df5b22a1bdf1437f9cd562e2614333">rfConfigureNetwork</a> (<a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> pnCode, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> nChannel, <a class="el" href="a00292.html#ga696390429f2f3b644bde8d0322a24124">U32</a> *pMid)</td></tr>
<tr class="memdesc:ga18df5b22a1bdf1437f9cd562e2614333"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reconfiguration des paramètres du réseau.  <a href="#ga18df5b22a1bdf1437f9cd562e2614333">Plus de détails...</a><br/></td></tr>
<tr class="separator:ga18df5b22a1bdf1437f9cd562e2614333"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentation des définitions de type</h2>
<a class="anchor" id="ga1ed0920c461609e27d97360ad25b2ac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* CBSENSORPACKETRECEIVED)(<a class="el" href="a00292.html#ga3ac2f53a6db3f2414db8091758ad890f">PACKET_TYPES</a> PacketType, <a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> DeviceId, <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> UserDataCount, volatile <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *buf)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type de fonction de gestion de réception de paquets. </p>
<p>Permet de simplifier la déclaration de la fonction d'enregistrement. </p>

<p>Définition à la ligne <a class="el" href="a00132_source.html#l00061">61</a> du fichier <a class="el" href="a00132_source.html">idwarf/hub.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentation des fonctions</h2>
<a class="anchor" id="ga0de54ea5738a40c2e85276e86551bfe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cbPacketReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#ga3ac2f53a6db3f2414db8091758ad890f">PACKET_TYPES</a>&#160;</td>
          <td class="paramname"><em>PacketType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>DeviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td>
          <td class="paramname"><em>UserDataCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile <a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exemple de fonction utilisateur de gestion de réception de paquets. </p>
<p>Appelée lorsqu'un paquet a été reçu venant d'un capteur. Il est possible d'accéder directement aux données actuelles du capteur à cet endroit. Toutefois, tout traitement prolongé <b>doit</b> être effectué <b>dans</b> le programme principal, par exemple en copiant les données fournies par cette fonction dans un buffer partagé ( <a class="el" href="a00265.html">Pile d'octets FIFO</a> ). Cette fonction doit être enregistrée avec <a class="el" href="a00293.html#ga5c28f5f58329f36ede84c1b3a94d9eed">rfRegisterCBSensorDataReceived()</a>.</p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">PacketType</td><td>Type de paquet reçu </td></tr>
    <tr><td class="paramname">DeviceId</td><td>Identifiant du capteur à l'origine des informations. </td></tr>
    <tr><td class="paramname">buf</td><td>Pointeur sur le buffer où sont les données reçues du hub </td></tr>
    <tr><td class="paramname">UserDataCount</td><td>Nombre d'octets stockés dans le buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga18df5b22a1bdf1437f9cd562e2614333"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> rfConfigureNetwork </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td>
          <td class="paramname"><em>pnCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td>
          <td class="paramname"><em>nChannel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#ga696390429f2f3b644bde8d0322a24124">U32</a> *&#160;</td>
          <td class="paramname"><em>pMid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reconfiguration des paramètres du réseau. </p>
<p>Définit le PN Code, le canal et son sous-ensemble et permet de changer le MID du hub (d'où sont tirés le checksum seed et le CRC seed). Tous les capteurs déja liés sont perdus. Avec cette fonction, plus d'un hub peut être utilisé dans le même espace. Chaque hub est configuré pour utiliser un PN Code différent donc ils ne gênent pas du tout.</p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">pnCode</td><td>PN Code </td></tr>
    <tr><td class="paramname">nChannel</td><td>Canal initial. Ce paramètre définit le sous-ensemble de canaux utilisés (cf le DVK Technical Reference Manual). </td></tr>
    <tr><td class="paramname">pMid</td><td>MID du hub qui sera mémorisé en RAM (celui gravé dans la puce RF n'est pas modifiable). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>CMD_STATUS_SUCCESS en cas de succès, un code COMMAND_STATUS en cas d'erreur </dd></dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a26">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga94f65ad2454ca5084807877fe5cb0259"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> rfDeleteSensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>DeviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suppression d'un capteur. </p>
<p>Si le hub ne doit plus traiter les messages d'un capteur spécifique ou si un capteur n'est plus disponible, un appel à cette fonction supprime le capteur ayant le DeviveId dans la mémoire du hub et définit son statut comme "non lié". </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">DeviceId</td><td>Identifiant du capteur </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>CMD_STATUS_SUCCESS en cas de succès, CMD_STATUS_UNKNOWN_ID si l'identifiant est inconnu </dd></dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a25">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gafca611de2af26b00c78adf47e4460781"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a> rfGetMaximumDeviceId </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renvoie l'identifiant le plus élevé pouvant être géré par le hub. </p>
<p>Chaque capteur lié obtient une DeviceId et ses données sont stockées par le hub. Il existe plusieurs configurations possibles pour le stockage de ces informations et cette fonction retourne l'identifiant le plus élevé possible. Le hub ne pourra donc gérer au plus que <a class="el" href="a00293.html#gafca611de2af26b00c78adf47e4460781" title="Renvoie l&#39;identifiant le plus élevé pouvant être géré par le hub. ">rfGetMaximumDeviceId()</a>+1 en même temps. </p>
<dl class="section return"><dt>Renvoie</dt><dd>Capacité du hub en nombre de capteurs </dd></dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a20">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga2fd004b962b40628cbfb2d8459fd1c5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#ga7e421c1ba14c79eb5d8ccbd7ea44cffb">PROTOCOL_STATUS</a> rfGetProtocolStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renvoie la variable d'état interne du firmware du hub. </p>
<p>Pas vraiment nécessaire, mais peut être documenté et utilisé davantage dans l'avenir. </p>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a19">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga270559d73bc5379a0fe9a7d72b88af98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> rfGetSensorMID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>DeviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaadbb32d2daa5cdd157a86e3d92f23f2d">MID</a> *&#160;</td>
          <td class="paramname"><em>mid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test de la validité et lecture du MID d'un capteur. </p>
<p>Chaque capteur intégré au réseau est mémorisé par le firmware du hub. Chaque module RF a son propre identifiant unique, appelé MID. Cette valeur et le DeviceID correspondant sont mémorisé par le firmware. <br/>
Cette fonction peut être utilisée pour:</p>
<ul>
<li>Tester pour chaque DeviceId s'il y a un capteur valide correspondant</li>
<li>Obtenir la valeur du MID chaque capteur MID valide <dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">DeviceId</td><td>Identifiant du capteur </td></tr>
    <tr><td class="paramname">mid</td><td>Pointeur où stocker le MID résultat (0 = pas de MID renvoyé) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>1 si l'identifiant correspond à un capteur valide, 0 sinon. </dd></dl>
</li>
</ul>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a22">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gae2bbb0ff4fe7815b1b32a83e4f983176"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> rfIsBackchannelFree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>DeviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Teste s'il est possible de mémoriser des données pour un capteur. </p>
<p>Aide à l'utilisation de <a class="el" href="a00293.html#gaee368d1d10062ee8ef9db75e1364a2fe">rfSetBackchannelData()</a> </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">DeviceId</td><td>Identifiant du capteur </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>1 si il y a de la place pour stocker des données pour ce capteur, 0 sinon. </dd></dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a14">idwarf/terminal/hub/terminal_hub.c</a>, et <a class="el" href="a00043.html#a10">idwarf/tutorial/hub/tutorial_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga5c28f5f58329f36ede84c1b3a94d9eed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfRegisterCBSensorDataReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00293.html#ga1ed0920c461609e27d97360ad25b2ac3">CBSENSORPACKETRECEIVED</a>&#160;</td>
          <td class="paramname"><em>cbSensor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enregistre la fonction de réception de paquets. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">cbSensor</td><td>Nom de la fonction implémentée par l'utilisateur </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a7">idwarf/terminal/hub/terminal_hub.c</a>, et <a class="el" href="a00043.html#a6">idwarf/tutorial/hub/tutorial_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gad1afc05c39d5aa99a9b7dbe424b83037"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfReset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Effectue une réinitialisation logicielle du firmware et du processeur. </p>
<p>Pas besoin de beaucoup, mais peut être pratique si vous voulez recommencer à zéro sans aucun capteur ou données stockées pour le traitement. </p>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a16">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gaee368d1d10062ee8ef9db75e1364a2fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> rfSetBackchannelData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>DeviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td>
          <td class="paramname"><em>userData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#ga0a0a322d5fa4a546d293a77ba8b4a71f">U16</a>&#160;</td>
          <td class="paramname"><em>beaconTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00292.html#gaa63ef7b996d5487ce35a5a66601f3e73">U8</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mémorise les données à trasmettre à un capteur par la canal de réponse. </p>
<p>Chaque fois que le capteur envoie des données au hub, le hub peut répondre avec des données qu'il envoie vers le capteur. Etant donné que le moment exact où le capteur va envoyer son paquet n'est inconnu, la réponse vers le capteur est stocké en mémoire par le hub. Cette fonction est utilisé pour stocker les données pour le capteur dans la mémoire du hub. <br/>
Au prochain échange avec le capteur, ces données lui seront transférées. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">DeviceId</td><td>Identifiant du capteur à qui seront envoyées les données </td></tr>
    <tr><td class="paramname">userData</td><td>Une valeur entre 0 et 31 à transmettre au capteur </td></tr>
    <tr><td class="paramname">beaconTime</td><td>Cette valeur permet de paramétrer le temps d'endormissement du capteur (exprimée en tranches de temps de 125 ms). Si cette valeur vaut -1, le temps d'endormissement n'est pas transmis et cela permet d'utiliser deux octets supplémentaires pour le payload.le capteur </td></tr>
    <tr><td class="paramname">buf</td><td>Pointeur vers un buffer contenant les données à transmettre </td></tr>
    <tr><td class="paramname">length</td><td>Nombre d'octets dans le buffer. Si beaconTime est spécifié ce nombre doit être compris entre 0 et 8, si beaconTime vaut -1, ce nombre peut être compris entre 0 et 10. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>CMD_STATUS_SUCCESS en cas de succès, CMD_STATUS_UNKNOWN_ID si l'identifiant est inconnu </dd></dl>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a15">idwarf/terminal/hub/terminal_hub.c</a>, et <a class="el" href="a00043.html#a11">idwarf/tutorial/hub/tutorial_hub.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga0ed69ac82f8c499c22691bc4bd5357e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfStartBind </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Valide le mode bind. </p>
<p>Le hub vérifie régulièrement PN0/CH0 à l'écoute de demande d'intégration de capteur. Si un capteur n'a pas la moindre idée des paramètres réseau (PN Code/Canal) à utiliser pour son intégration, il enverra des demandes d'intégration sur PN0/CH0 tant que nécessaire. <br/>
Si le hub est configuré pour fonctionner sur PN3 il ne pourra jamais "entendre" la demande du capteur car il n'écoute pas ce PN. <br/>
Il y a donc un mode où le hub écoute régulièrement PN0/CH0 quand il y a du temps disponible. Ce "bind" mode est activé et désactivé par les fonctions suivantes. Gardez à l'esprit, qu'un mode "bind" actif peut réduire le débit de données et constituer un risque potentiel pour la sécurité si vous ne voulez pas que d'autres capteurs soient intégrés au réseau </p>
<dl><dt><b>Exemples: </b></dt><dd><a class="el" href="a00045.html#a17">idwarf/terminal/hub/terminal_hub.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Généré le Vendredi 21 Mars 2014 21:47:53 pour AvrIO par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
